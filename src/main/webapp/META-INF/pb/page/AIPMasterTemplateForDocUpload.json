{
   "constantName": "AIPMasterTemplateForDocUpload",
   "developerSecurity": [],
   "extendsPage": null,
   "fileTimestamp": "2019-07-30T09:49:36Z",
   "modelView": {
      "components": [
         {
            "resource": "virtualDomains.ActionItemContent",
            "name": "ActionItemContent",
            "type": "resource",
            "staticData": []
         },
         {
            "resource": "virtualDomains.ActionItemStatus",
            "name": "ActionItemStatus",
            "type": "resource",
            "staticData": []
         },
         {
            "resource": "virtualDomains.ActionItemReviewStatus",
            "name": "ActionItemReviewStatus",
            "type": "resource",
            "staticData": []
         },
         {
            "resource": "virtualDomains.UserActionItem",
            "name": "UserActionItem",
            "type": "resource",
            "staticData": []
         },
         {
            "readonly": false,
            "name": "popAID",
            "onLoad": "if ( typeof(window.params.actionItemId) != 'undefined') {\n    var aid = window.params.actionItemId;\n} else {\n   //temporary - for testing only.\n   window.params.actionItemId = 6;\n}\nsetTimeout( function(){ \n    $ActionItemId.$load();\n}, \n500);",
            "model": "ActionItemContent",
            "style": "hidden",
            "loadInitially": true,
            "type": "text",
            "parameters": {},
            "validation": {},
            "required": false
         },
         {
            "readonly": false,
            "name": "ReviewStatus",
            "model": "ActionItemReviewStatus",
            "style": "hidden",
            "loadInitially": true,
            "type": "text",
            "value": "gcraact_rvst_code",
            "parameters": {
               "actionitemid": "$$params.actionItemId"
            },
            "validation": {},
            "required": false
         },
         {
            "readonly": false,
            "name": "ActionItemId",
            "onLoad": "$ActionItemContentDetail.$load();",
            "model": "ActionItemContent",
            "style": "hidden",
            "loadInitially": false,
            "type": "text",
            "value": "ACTION_ITEM_ID",
            "parameters": {
               "actionItemId": "$$params.actionItemId",
               "pageid": "$$params.id"
            },
            "validation": {},
            "required": false
         },
         {
            "readonly": false,
            "name": "UserActionItemId",
            "model": "UserActionItem",
            "style": "hidden",
            "loadInitially": true,
            "type": "text",
            "value": "gcraact_surrogate_id",
            "parameters": {
               "actionitemid": "$$params.actionItemId"
            },
            "validation": {},
            "required": false
         },
         {
            "components": [
               {
                  "allowDelete": false,
                  "components": [
                     {
                        "name": "ActionItemNameHeader",
                        "type": "literal",
                        "value": "<h4>$ActionItemContentDetail.ACTION_ITEM_TITLE</h4>"
                     },
                     {
                        "asHtml": true,
                        "name": "ActionItemContentDisplay",
                        "onLoad": "/*$(\"#pbid-ActionItemContentDetail-save-button\").removeClass('btn-sm').addClass('btn-primary').addClass('btn-md');*/\n\n$ActionItemStatusAgree.$load();",
                        "model": "ACTION_ITEM_CONTENT",
                        "loadInitially": true,
                        "type": "display",
                        "value": ""
                     },
                     {
                        "loadInitially": false,
                        "type": "radio",
                        "required": false,
                        "sourceParameters": {
                           "actionitemid": "$$params.actionItemId"
                        },
                        "name": "ActionItemStatusAgree",
                        "onLoad": "setTimeout(function () {\n\tvar userActionItemId = $UserActionItemId.GCRAACT_SURROGATE_ID;\n\tvar isCheckbox = $ActionItemContentDetail.STATUS_COUNT === 1 ? true : false;\n\tvar selectedResponse = null;\n        var browserType = window.navigator.userAgent;\n\tif (isCheckbox) {\n\t\tvar radio = document.getElementById(\"pbid-ActionItemStatusAgree-radio-0-0\");\n\t\tradio.type = \"checkbox\";\n\t}\n\tvar isResponseReviewRequired = false;\n\tif (typeof $ReviewStatus !== 'undefined') {\n\t\tisResponseReviewRequired = true;\n\t\t$(\"input[id^='pbid-ActionItemStatusAgree-radio']\").prop({\n\t\t\tdisabled: isResponseReviewRequired\n\t\t});\n\t}\n\t$(\"#pbid-ActionItemContentDetail-save-button\").click(function () {\n\t\tselectedResponse = $(\"input[id^='pbid-ActionItemStatusAgree-radio']:checked\")[0].id;\n\t\tvar responseElementId = selectedResponse.split(\"pbid-ActionItemStatusAgree-radio-0-\");\n\t\tisResponseReviewRequired = data[parseInt(responseElementId[1])].STATUS_REV_REQ_IND === 'Y' ? true : false;\n\t\tif (isResponseReviewRequired) {\n\t\t\t$(\"input[id^='pbid-ActionItemStatusAgree-radio']\").prop({\n\t\t\t\tdisabled: isResponseReviewRequired\n\t\t\t});\n\t\t\t$(\"#pbid-ActionItemContentDetail-save-button\").prop({\n\t\t\t\tdisabled: isResponseReviewRequired\n\t\t\t});\n\t\t\twindow.params.isResponseLocked = true;\n\t\t}\n\t});\n\n\tfor (var elementId = 0; elementId < data.length; elementId++) {\n\t\tvar responseElementId = \"#pbid-ActionItemStatusAgree-label-0-\" + elementId;\n\t\tvar paperClipId = \"pbid-ActionItemStatusAgree-paper-clip-0-\" + elementId;\n\t\tvar responseElement = $('#pbid-ActionItemStatusAgree-0').find(responseElementId);\n\t\tvar allowedAttachments = data[elementId].STATUS_ALLOWED_ATTACHMENT;\n\t\tvar responseId = data[elementId].STATUS_RULE_ID;\n\t\tif (allowedAttachments > 0) {\n\t\t\tAIP.ListItemPageCtrl.prototype.documentUploader(userActionItemId, paperClipId, responseElement, allowedAttachments, responseId, isResponseReviewRequired);\n\t\t}\n\t}\n\tselectedResponse = $(\"input[id^='pbid-ActionItemStatusAgree-radio']:checked\");\n\tif (selectedResponse.length > 0) {\n\t\tvar selResElementId = selectedResponse[0].id;\n\t\tvar index = selResElementId.split(\"pbid-ActionItemStatusAgree-radio-0-\")[1];\n\t\tif ($(\"#pbid-ActionItemStatusAgree-paper-clip-0-\" + index).length > 0) {\n\n\t\t\t//IE 10 or IE 11\n\t\t\tif ((browserType.indexOf('MSIE') > 0) || browserType.indexOf('Trident') > 0 || browserType.indexOf('Edge') > 0) {\n\t\t\t\t$(\"#pbid-ActionItemStatusAgree-paper-clip-0-\" + index)[0].setAttribute(\"src\", \"../../assets/attach_icon_default.svg\");\n\t\t\t} else {\n\t\t\t\t$(\"#pbid-ActionItemStatusAgree-paper-clip-0-\" + index)[0].setAttribute(\"src\", \"../assets/attach_icon_default.svg\");\n\t\t\t}\n\t\t}\n\t}\n\n\tif (isCheckbox) {\n\t\t$('input[type=\"checkbox\"]').click(function () {\n\t\t\tif ($(\"input[type='checkbox']:checked\").length === 1) {\n\t\t\t\t$(\"#pbid-ActionItemContentDetail-save-button\").removeAttr(\"disabled\");\n\t\t\t\tif ($(\"#pbid-ActionItemStatusAgree-paper-clip-0-0\").length > 0) {\n\t\t\t\t\t$(\"#pbid-ActionItemStatusAgree-paper-clip-0-0\")[0].setAttribute(\"src\", \"../assets/attach_icon_default.svg\");\n\n\t\t\t\t\t//IE 10 or IE 11\n\t\t\t\t\tif ((browserType.indexOf('MSIE') > 0) || browserType.indexOf('Trident') > 0 || browserType.indexOf('Edge') > 0) {\n\t\t\t\t\t\t$(\"#pbid-ActionItemStatusAgree-paper-clip-0-0\")[0].setAttribute(\"src\", \"../../assets/attach_icon_default.svg\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$(\"#pbid-ActionItemStatusAgree-paper-clip-0-0\")[0].setAttribute(\"src\", \"../assets/attach_icon_default.svg\");\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t//IE 10 or IE 11\n\t\t\t\t\tif ((browserType.indexOf('MSIE') > 0) || browserType.indexOf('Trident') > 0 || browserType.indexOf('Edge') > 0) {\n\t\t\t\t\t\t$(\"#pbid-ActionItemStatusAgree-paper-clip-0-0\")[0].setAttribute(\"src\", \"../../assets/attach_icon_disabled.svg\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$(\"#pbid-ActionItemStatusAgree-paper-clip-0-0\")[0].setAttribute(\"src\", \"../assets/attach_icon_disabled.svg\");\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t$(\"#pbid-ActionItemContentDetail-save-button\").attr(\"disabled\", \"disabled\");\n\t\t\t}\n\t\t});\n\t} else {\n\t\t$('input[type=\"radio\"]').click(function () {\n\n\t\t\t//IE 10 or IE 11\n\t\t\tif ((browserType.indexOf('MSIE') > 0) || browserType.indexOf('Trident') > 0 || browserType.indexOf('Edge') > 0) {\n\t\t\t\t$('#pbid-ActionItemStatusAgree-0').find('input[type=\"image\"]').attr(\"src\", \"../../assets/attach_icon_disabled.svg\");\n\t\t\t} else {\n\t\t\t\t$('#pbid-ActionItemStatusAgree-0').find('input[type=\"image\"]').attr(\"src\", \"../assets/attach_icon_disabled.svg\");\n\t\t\t}\n\n\n\t\t\tvar id = $(\"input[type='radio']:checked\")[0].id;\n\t\t\tid = id.split(\"pbid-ActionItemStatusAgree-radio-0-\");\n\t\t\tif ($(\"#pbid-ActionItemStatusAgree-paper-clip-0-\" + id[1]).length > 0) {\n\n\t\t\t\t//IE 10 or IE 11\n\t\t\t\tif ((browserType.indexOf('MSIE') > 0) || browserType.indexOf('Trident') > 0 || browserType.indexOf('Edge') > 0) {\n\t\t\t\t\t$(\"#pbid-ActionItemStatusAgree-paper-clip-0-\" + id[1])[0].setAttribute(\"src\", \"../../assets/attach_icon_default.svg\");\n\t\t\t\t} else {\n\t\t\t\t\t$(\"#pbid-ActionItemStatusAgree-paper-clip-0-\" + id[1])[0].setAttribute(\"src\", \"../assets/attach_icon_default.svg\");\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n}, 300);",
                        "model": "STATUS_RULE_ID",
                        "sourceModel": "ActionItemStatus",
                        "style": "",
                        "labelKey": "STATUS_RULE_LABEL_TEXT",
                        "valueKey": "STATUS_RULE_ID",
                        "onUpdate": "params.isResponseModified = true;",
                        "value": ""
                     }
                  ],
                  "onError": "var errorMessage =response.data.errors? response.data.errors.errorMessage: null;if (errorMessage && errorMessage.indexOf(\"ORA-20000\") > -1) {  alert(\"An entry already exists for this virtual domain and role, cannot add a duplicate\", {type:\"error\"});} else {   alert( errorMessage?errorMessage:response.data, {type:\"error\"});};\n$(\"input[id^='pbid-ActionItemStatusAgree-radio']\").prop('disabled', false);\nwindow.params.isResponseLocked = false;",
                  "onSave": "",
                  "allowNew": false,
                  "documentation": "Displays data from virtual domain ActionItemContent",
                  "pageSize": 1,
                  "onSaveSuccess": "alert($.i18n.prop(\"js.notification.success\"), {type:\"success\", flash:true});\nwindow.params.saved=true;",
                  "label": "",
                  "loadInitially": false,
                  "type": "detail",
                  "newRecordLabel": "",
                  "name": "ActionItemContentDetail",
                  "onLoad": "setTimeout( function(){ \n    console.log(\"status count \" + $ActionItemContentDetail.STATUS_COUNT);\n    $ActionItemStatusAgree.$load();\n}, \n300);",
                  "allowModify": true,
                  "model": "ActionItemContent",
                  "allowReload": false,
                  "parameters": {
                     "actionitemid": "$$params.actionItemId",
                     "pageid": "$$params.id"
                  }
               }
            ],
            "name": "PolicyBlock",
            "showInitially": true,
            "label": "",
            "type": "block"
         }
      ],
      "name": "AIPMasterTemplateForDocUpload",
      "label": "",
      "type": "page"
   },
   "owner": null,
   "pageRoles": [
      {
         "roleName": "ALLROLES",
         "allow": true
      }
   ]
}